<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Simple Wallet | Mini V√≠ Ti·ªÅn ƒêi·ªán T·ª≠</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%2306B6D4' width='100' height='100' rx='20'/><text x='50' y='70' font-size='60' fill='white' text-anchor='middle' font-weight='bold'>‚Çø</text></svg>" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/ethers@6.13.2/dist/ethers.umd.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js" defer></script>
    <!-- Component modules -->
    <script src="src/components/ui.js" defer></script>
    <script src="src/components/wallet.js" defer></script>
    <script src="src/components/market.js" defer></script>
    <script src="src/components/transactions.js" defer></script>
    <script src="src/components/smartContract.js" defer></script>
    <!-- Main orchestrator -->
    <script src="src/app.js" defer></script>
  </head>
  <body class="text-slate-100">
    <main class="max-w-4xl mx-auto px-4 py-10 space-y-6">
      <header class="text-center space-y-3 pb-6 border-b border-slate-700/50">
        <div class="flex items-center justify-center gap-2 mb-2">
          <span class="text-2xl">üíº</span>
          <p class="uppercase tracking-[0.3em] text-sm text-cyan-300 font-bold">Simple Wallet</p>
        </div>
        <h1 class="text-4xl font-semibold">V√≠ ti·ªÅn ƒëi·ªán t·ª≠ mini</h1>
        <p class="text-slate-300">K·∫øt n·ªëi MetaMask, xem s·ªë d∆∞ v√† g·ª≠i ETH testnet ch·ªâ trong v√†i thao t√°c.</p>
        <p class="text-xs text-amber-400 font-semibold">‚ö†Ô∏è H√£y ch·ªçn m·∫°ng Sepolia trong MetaMask tr∆∞·ªõc khi b·∫•m Connect</p>
        <div class="mt-4 inline-flex gap-2 px-4 py-2 rounded-xl bg-slate-900/50 border border-slate-700/50 text-xs text-slate-400">
          <span>üì¶ 5 Components</span>
          <span>‚Ä¢</span>
          <span>üîß Modular Architecture</span>
        </div>
      </header>

      <!-- WALLET COMPONENT -->
      <section class="grid md:grid-cols-2 gap-6">
        <article class="blur-card rounded-2xl p-6 space-y-4 ring-1 ring-cyan-400/30">
          <div class="flex items-center gap-2 mb-3 pb-3 border-b border-slate-700/50">
            <span class="text-lg">üîê</span>
            <p class="text-xs uppercase tracking-[0.3em] text-cyan-300 font-semibold">Wallet Component</p>
          </div>
          <div class="flex items-center justify-between gap-4">
            <div>
              <p class="text-xs uppercase tracking-[0.3em] text-slate-300">Tr·∫°ng th√°i v√≠</p>
              <p id="walletStatus" class="text-lg font-semibold">Ch∆∞a k·∫øt n·ªëi</p>
            </div>
            <button id="connectBtn" class="px-4 py-2 rounded-xl bg-cyan-500 text-slate-900 font-semibold hover:bg-cyan-400 transition">Connect Wallet</button>
          </div>

          <div class="space-y-2">
            <div class="flex items-center justify-between gap-4">
              <p class="text-xs uppercase tracking-[0.3em] text-slate-400">ƒê·ªãa ch·ªâ v√≠</p>
            <div class="flex gap-2">
                <button id="copyBtn" class="px-3 py-1 text-xs rounded-lg border border-slate-500 text-slate-300 hover:bg-slate-800 hover:text-slate-100 transition disabled:opacity-50 disabled:cursor-not-allowed" disabled>Copy</button>
                <button id="modeToggle" class="px-3 py-1 text-xs rounded-lg border border-slate-500 text-slate-300 hover:bg-slate-800 hover:text-slate-100 transition">Dark</button>
              </div>
            </div>
            <p id="walletAddress" class="text-sm truncate text-slate-200 font-mono bg-slate-900/50 p-2 rounded-lg">‚Äî</p>
          </div>

          <div id="qrCanvas" class="flex justify-center py-2"></div>
        </article>

        <article class="blur-card rounded-2xl p-6 space-y-4 ring-1 ring-emerald-400/30">
          <div class="flex items-center gap-2 mb-3 pb-3 border-b border-slate-700/50">
            <span class="text-lg">üí∞</span>
            <p class="text-xs uppercase tracking-[0.3em] text-emerald-300 font-semibold">Balance & Market</p>
          </div>
          <div class="flex items-center justify-between gap-3">
            <div>
              <p class="text-xs uppercase tracking-[0.3em] text-slate-300">S·ªë d∆∞ Sepolia</p>
              <p id="walletBalance" class="text-3xl font-semibold">0.0000 ETH</p>
            </div>
            <button id="refreshBtn" class="px-4 py-2 rounded-xl border border-emerald-400 text-emerald-300 hover:bg-emerald-400 hover:text-slate-900 transition" disabled>Refresh</button>
          </div>
          <p class="text-xs text-slate-400">S·ªë d∆∞ s·∫Ω t·ª± c·∫≠p nh·∫≠t sau m·ªói giao d·ªãch.</p>
          <div class="text-sm text-slate-300 space-y-1 pt-2 border-t border-slate-700/50">
            <p>Gi√° ETH: <span id="ethPriceWallet" class="text-cyan-300 font-semibold">$‚Äî</span></p>
            <p>Gi√° tr·ªã v√≠: <span id="balanceFiatWallet" class="text-emerald-300 font-semibold">$‚Äî</span></p>
            <p class="text-xs text-slate-400">C·∫≠p nh·∫≠t: <span id="priceUpdatedAtWallet">‚Äî</span></p>
          </div>
        </article>
      </section>

      <!-- MARKET COMPONENT -->
      <section class="grid md:grid-cols-2 gap-6">
        <article class="blur-card rounded-2xl p-6 space-y-3 ring-1 ring-purple-400/30">
          <div class="flex items-center gap-2 mb-3 pb-3 border-b border-slate-700/50">
            <span class="text-lg">üìä</span>
            <p class="text-xs uppercase tracking-[0.3em] text-purple-300 font-semibold">Market Data</p>
          </div>
          <h3 class="text-sm text-slate-400 uppercase tracking-widest">Th√¥ng tin th·ªã tr∆∞·ªùng</h3>
          <p class="text-2xl font-semibold text-cyan-300" id="ethPrice">$‚Äî</p>
          <p class="text-sm text-slate-300">Gi√° ETH hi·ªán t·∫°i (Ngu·ªìn: CoinGecko)</p>
          <div class="text-sm text-slate-300 space-y-1 pt-2 border-t border-slate-700/50">
            <p>Gi√° tr·ªã v√≠ ∆∞·ªõc t√≠nh: <span id="balanceFiat">$‚Äî</span></p>
            <p>C·∫≠p nh·∫≠t l·∫ßn cu·ªëi: <span id="priceUpdatedAt">‚Äî</span></p>
          </div>
        </article>

        <article class="blur-card rounded-2xl p-6 space-y-3 ring-1 ring-blue-400/30">
          <div class="flex items-center gap-2 mb-3 pb-3 border-b border-slate-700/50">
            <span class="text-lg">‚õΩ</span>
            <p class="text-xs uppercase tracking-[0.3em] text-blue-300 font-semibold">Network Status</p>
          </div>
          <h3 class="text-sm text-slate-400 uppercase tracking-widest">T√¨nh tr·∫°ng m·∫°ng</h3>
          <p class="text-xl font-semibold text-blue-300" id="networkName">Ch∆∞a x√°c ƒë·ªãnh</p>
          <div class="text-sm text-slate-300 space-y-1 pt-2 border-t border-slate-700/50">
            <p>Gas price: <span id="gasBase">‚Äî</span></p>
            <p>∆Ø·ªõc t√≠nh ph√≠ (21k gas): <span id="txFee">‚Äî</span></p>
            <p>T∆∞∆°ng ƒë∆∞∆°ng USD: <span id="txFeeFiat">‚Äî</span></p>
          </div>
        </article>
      </section>

      <!-- TRANSACTIONS COMPONENT -->
      <section class="blur-card rounded-2xl p-6 space-y-4 ring-1 ring-green-400/30">
        <div class="flex items-center gap-2 mb-3 pb-3 border-b border-slate-700/50">
          <span class="text-lg">üí∏</span>
          <p class="text-xs uppercase tracking-[0.3em] text-green-300 font-semibold">Transactions Component</p>
        </div>
        <div class="flex items-center justify-between">
          <h2 class="text-xl font-semibold">G·ª≠i ETH testnet</h2>
          <span id="networkHint" class="text-xs text-slate-400 bg-slate-900/50 px-2 py-1 rounded">Sepolia</span>
        </div>
        <form id="transferForm" class="space-y-4">
          <label class="block text-sm text-slate-300">
            ƒê·ªãa ch·ªâ nh·∫≠n
            <input id="recipient" type="text" placeholder="0x..." class="mt-1 w-full rounded-xl bg-slate-900/60 border border-slate-600 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-green-400" />
          </label>

          <label class="block text-sm text-slate-300">
            S·ªë ETH mu·ªën g·ª≠i
            <input id="amount" type="number" min="0" step="0.0001" placeholder="0.01" class="mt-1 w-full rounded-xl bg-slate-900/60 border border-slate-600 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-green-400" />
          </label>

          <div class="rounded-2xl border border-slate-700/60 bg-slate-900/40 p-4 text-sm text-slate-200 space-y-1" id="gasInfo">
            <p>Ph√≠ gas d·ª± ki·∫øn (21k gas): <span id="formTxFee" class="text-cyan-300 font-semibold">‚Äî</span></p>
            <p>T·ªïng chi ph√≠ (amount + gas): <span id="totalCost" class="text-green-300 font-semibold">‚Äî</span></p>
          </div>

          <button id="sendBtn" type="submit" class="w-full py-3 rounded-xl bg-emerald-400 text-slate-900 font-semibold hover:bg-emerald-300 transition" disabled>Send ETH</button>
        </form>
        <p id="formError" class="text-sm text-rose-400 font-medium min-h-[1.5rem]"></p>
        <div class="space-y-1 text-sm text-slate-300 pt-3 border-t border-slate-700/50">
          <p>Tr·∫°ng th√°i: <span id="txStatus" class="text-slate-200">Ch∆∞a c√≥ giao d·ªãch</span></p>
          <p>Tx hash: <a id="txHash" class="text-cyan-300 underline break-all" target="_blank" rel="noreferrer">‚Äî</a></p>
        </div>
      </section>

      <!-- SMART CONTRACT COMPONENT -->
      <section class="blur-card rounded-2xl p-6 space-y-4 ring-1 ring-orange-400/30">
        <div class="flex items-center gap-2 mb-3 pb-3 border-b border-slate-700/50">
          <span class="text-lg">üìú</span>
          <p class="text-xs uppercase tracking-[0.3em] text-orange-300 font-semibold">Smart Contract Component</p>
        </div>
        <div class="flex items-center justify-between">
          <h2 class="text-xl font-semibold">Smart Contract - N·∫°p/R√∫t ETH</h2>
          <span id="contractStatus" class="text-xs text-rose-400 bg-slate-900/50 px-2 py-1 rounded">‚úó Ch∆∞a c·∫•u h√¨nh</span>
        </div>
        <p class="text-sm text-slate-400">T∆∞∆°ng t√°c v·ªõi smart contract SimpleBank tr√™n Sepolia.</p>
        
        <div class="grid md:grid-cols-2 gap-4">
          <div class="rounded-2xl border border-slate-700/60 bg-slate-900/40 p-4 ring-1 ring-orange-400/20">
            <p class="text-xs text-slate-400 mb-2 uppercase tracking-widest">S·ªë d∆∞ trong contract</p>
            <p id="contractBalance" class="text-3xl font-semibold text-orange-300">‚Äî</p>
            <button id="refreshContractBalance" class="mt-3 px-3 py-1 text-xs rounded-lg bg-slate-800 hover:bg-slate-700 transition" disabled>üîÑ Refresh</button>
          </div>

          <div class="rounded-2xl border border-slate-700/60 bg-slate-900/40 p-4 ring-1 ring-orange-400/20 space-y-2">
            <p class="text-xs text-slate-400 uppercase tracking-widest">Th√¥ng tin</p>
            <p class="text-xs text-slate-400">ƒê·ªãa ch·ªâ contract:</p>
            <p id="contractAddress" class="text-xs text-orange-300 break-all font-mono bg-slate-900/50 p-2 rounded">‚Äî</p>
            <p class="text-xs text-amber-400" id="contractWarning"></p>
          </div>
        </div>

        <form id="depositForm" class="space-y-4 mt-4">
          <div class="border-t border-slate-700/60 pt-4">
            <h3 class="font-semibold mb-3 text-orange-300 flex items-center gap-2">
              <span>‚¨ÜÔ∏è</span> N·∫°p ETH v√†o contract
            </h3>
            <label class="block text-sm text-slate-300">
              S·ªë ETH c·∫ßn n·∫°p
              <input id="depositAmount" type="number" min="0" step="0.0001" placeholder="0.01" class="mt-1 w-full rounded-xl bg-slate-900/60 border border-slate-600 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-orange-400" />
            </label>
            <button id="depositBtn" type="button" class="mt-3 w-full py-2 rounded-xl bg-orange-500 text-slate-900 font-semibold hover:bg-orange-400 transition" disabled>Deposit</button>
            <p id="depositError" class="text-sm text-rose-400 font-medium mt-2 min-h-[1.5rem]"></p>
          </div>
        </form>

        <form id="withdrawForm" class="space-y-4">
          <div class="border-t border-slate-700/60 pt-4">
            <h3 class="font-semibold mb-3 text-emerald-400 flex items-center gap-2">
              <span>‚¨áÔ∏è</span> R√∫t ETH t·ª´ contract
            </h3>
            <label class="block text-sm text-slate-300">
              S·ªë ETH c·∫ßn r√∫t
              <input id="withdrawAmount" type="number" min="0" step="0.0001" placeholder="0.01" class="mt-1 w-full rounded-xl bg-slate-900/60 border border-slate-600 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-emerald-400" />
            </label>
            <button id="withdrawBtn" type="button" class="mt-3 w-full py-2 rounded-xl bg-emerald-500 text-slate-900 font-semibold hover:bg-emerald-400 transition" disabled>Withdraw</button>
            <p id="withdrawError" class="text-sm text-rose-400 font-medium mt-2 min-h-[1.5rem]"></p>
          </div>
        </form>
      </section>

      <!-- HISTORY SECTION -->
      <section class="blur-card rounded-2xl p-6 space-y-4 ring-1 ring-slate-500/30">
        <div class="flex items-center gap-2 mb-3 pb-3 border-b border-slate-700/50">
          <span class="text-lg">üìö</span>
          <p class="text-xs uppercase tracking-[0.3em] text-slate-300 font-semibold">Transaction History</p>
        </div>
        <div class="flex items-center justify-between">
          <h2 class="text-xl font-semibold">L·ªãch s·ª≠ giao d·ªãch (local)</h2>
          <div class="flex gap-2 text-xs">
            <button id="downloadHistory" class="px-3 py-1 rounded-lg border border-slate-500 text-slate-300 hover:bg-slate-800 hover:text-slate-100 transition disabled:opacity-50 disabled:cursor-not-allowed" disabled>üì• T·∫£i JSON</button>
            <button id="clearHistory" class="px-3 py-1 rounded-lg border border-slate-500 text-slate-300 hover:bg-slate-800 hover:text-slate-100 transition disabled:opacity-50 disabled:cursor-not-allowed" disabled>üóëÔ∏è X√≥a</button>
          </div>
        </div>
        <ul id="historyList" class="space-y-3 text-sm text-slate-200">
          <li class="text-slate-400">Ch∆∞a c√≥ giao d·ªãch ƒë∆∞·ª£c l∆∞u.</li>
        </ul>
      </section>
    </main>
  </body>
</html>
